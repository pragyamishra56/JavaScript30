<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Debouncing</title>
</head>

<body>
  <!-- <h4>Both throttling and debouncing are two techniques to control basically how often a function is
    executed, often in response to some some sort of event, a scroll event, an input event where a function
    might be called way too often, naturally
    "throttling" or " Debouncing" to control how often that function is called.
  </h4>
  <h3>throttling techniques</h3>
  <p>It is a technique used to make sure a function is called at most one time within some duration.</p>
  <input type="search" id="search"> -->
</body>

<script>

  // ****** Debouncing ******
  // function queryAPI() {
  //   console.log("Seearching the API!");
  //   console.log("Making an API Request!!")
  // }


  // const searchInput = document.querySelector("#search");

  // let debounceTimeout;
  // searchInput.addEventListener("input", () => {
  //   clearTimeout(debounceTimeout);
  //   debounceTimeout = setTimeout(() => {
  //     queryAPI();
  //   }, 400);
  // });


  // function queryAPI(searchTerm, color) {
  //   console.log(`Searching the API for ${searchTerm}`);
  //   console.log(`color argument is ${color}`);
  // }
  // const searchInput = document.querySelector("#search");

  // function debounce(callback, delay) {
  //   let timeoutId;
  //   return (...args) => {
  //     if(timeoutId) {
  //       clearTimeout(timeoutId);
  //     }
  //     timeoutId = setTimeout(() => {
  //       callback(...args);
  //     }, delay);
  //   };
  // }

  // const debouncedQueryAPI = debounce(queryAPI, 300);

  // searchInput.addEventListener("input", (evt) => {
  //   debouncedQueryAPI(evt.target.value, "purple");
  // });

  // ****** Throttling *****
  // 
  function getRandomColor() {
    const palette = [
      "#FFADAD",
      "#FFC3A0",
      "#FF677D",
      "#392F5A",
      "#31A2AC",
      "#61C0BF",
      "#6B4226",
      "#D9BF77",
      "#ACD8AA",
      "#FFE156",
      "#6A0572",
      "#AB83A1",
    ];

    const randomIndex = Math.floor(Math.random() * palette.length);
    return palette[randomIndex];
  }

  const content = document.getElementById("content");

  function loadMoreItems() {
    const scrollDistanceToBottom = 
    document.documentElement.scrollHeight - window.scrollY - window.innerHeight;


    if(scrollDistanceToBottom < 200) {
      console.log("Loading data  from an API!");
      for(let i=0; i<10; i++) {
        const item = document.createElement("div");
        item.classList.add("item");
        item.textContent = "Item " + (content.children.length + 1);
        item.style.background(item);
      }
    }
  }

  window.addEventListener("scroll", () => {
    loadMoreItems();
  });
 

  // Initial load
  loadMoreItems();

</script>

</html>